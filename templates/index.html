<html>
    <head>
        <title>Network Tools</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
        <style>
            * { font-family: 'VT323', 'Courier New', monospace; }
        </style>
        <body class="bg-[#2d2a24] text-[#d4c8b8] min-h-screen p-5">
            <div class="max-w-[600px] mx-auto grid gap-5">
                <h1 class="text-center text-[2.5rem] text-[#e8dcc8]">APCSP Network Tools</h1>
                <p class="text-center text-[#8a7f6e] text-[1.2rem]">WATZ FO LUNCH??</p>

                <div class="bg-[#3d3830] border-4 border-[#5c534a] p-5">
                    <div class="grid grid-cols-[auto_1fr] gap-2.5 items-center">
                        <label>Domain/IP:</label>
                        <input type="text" id="target" value="google.com" class="text-[1.3rem] p-2.5 border-[3px] border-[#6b8f71] bg-[#2d2a24] text-[#d4c8b8] w-full"/>
                    </div>
                </div>

                <div class="grid grid-cols-3 gap-[15px]">
                    <button onclick="runTool('ping')" class="text-[1.3rem] p-3 bg-[#4a6670] text-[#d4c8b8] border-4 border-[#5c534a] cursor-pointer hover:bg-[#5a7680] disabled:opacity-50 disabled:cursor-wait flex items-center justify-center gap-2"><img src="/static/lightbulb.png" alt="lightbulb" class="w-10 h-6 inline-block"> ping</button>
                    <button onclick="runTool('nslookup')" class="text-[1.3rem] p-3 bg-[#4a6670] text-[#d4c8b8] border-4 border-[#5c534a] cursor-pointer hover:bg-[#5a7680] disabled:opacity-50 disabled:cursor-wait flex items-center justify-center gap-2"><img src="/static/telescope.png" alt="telescope" class="w-10 h-6 inline-block"> nslookup</button>
                    <button onclick="runTool('traceroute')" class="text-[1.3rem] p-3 bg-[#4a6670] text-[#d4c8b8] border-4 border-[#5c534a] cursor-pointer hover:bg-[#5a7680] disabled:opacity-50 disabled:cursor-wait flex items-center justify-center gap-2"><img src="/static/road.png" alt="road" class="w-10 h-6 inline-block"> traceroute</button>
                </div>
            </div>

            <br/>
            <br/>
            
            <div id="output" class="text-[1rem] bg-[#242322] border-4 border-[#c9653a] p-5 max-w-[800px] mx-auto">
                <h1 class="text-[1.5rem] text-[#e8dcc8]">Output:</h1>
                <p>~ results will appear here ~</p>
            </div>

            <script>
                const output = document.getElementById('output');
                const target = document.getElementById('target');
                const buttons = document.querySelectorAll('button');
        
                target.addEventListener('keypress', e => {
                    if (e.key === 'Enter') runTool('ping');
                });
        
                function runTool(tool) {
                    output.textContent = '~ running ' + tool + '... ~';
                    buttons.forEach(b => b.disabled = true);
        
                    fetch('/run', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                        body: 'tool=' + tool + '&target=' + encodeURIComponent(target.value)
                    })
                    .then(r => r.json())
                    .then(data => {
                        output.textContent = data.output;
                        buttons.forEach(b => b.disabled = false);
                    })
                    .catch(() => {
                        output.textContent = '~ connection error ~';
                        buttons.forEach(b => b.disabled = false);
                    });
                }
            </script>
        </body>
    </head>
</html>